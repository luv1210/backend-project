<%- include('header')%>

<!-- ================= MOVIES PAGE – MODERN UI ================= -->
<div class="movies-container pt-4">
  <div class="movies-background"></div>

  <div class="container py-5">

    <!-- Header -->
    <div class="movies-header mb-5 d-flex flex-column flex-lg-row justify-content-between align-items-start align-items-lg-center gap-3">
      <div>
        <h1 class="text-light fw-bold mb-1">
          <i class="fa-solid fa-popcorn text-warning me-2"></i>
          Movies Collection
        </h1>
        <p class="text-secondary mb-0">Explore, manage & organize your movie library</p>
      </div>

      <form>
        <input type="hidden" name="search" value="<%= search %>">
        <select name="sorting" class="form-select stylish-select bg-dark" onchange="this.form.submit()">
           <option <%=sorting == ""?"selected":""%> value="">sort by name</option>
      <option <%=sorting == "ase"?"selected":""%> value="ase">Ascending</option>
      <option<%=sorting == "desc"?"selected":""%> value="desc">Descending</option>
        </select>
      </form>
    </div>

    <!-- Movies Grid -->
    <div class="row g-4">

      <% movies.forEach((movie,i)=>{ %>
      <div class="col-12 col-sm-6 col-md-4 col-lg-3">
        <div class="card movie-card h-100">

          <!-- Poster -->
          <div class="movie-poster-container">
            <img src="<%=movie.poster%>" class="movie-poster" alt="Movie">

            <div class="movie-overlay">
              <span class="badge genre-badge"><%=movie.genre%></span>
              <span class="badge rating-badge">
                <i class="fa fa-star me-1"></i><%=movie.rating%>
              </span>
              <button class="btn favorite-btn">
                <i class="fa-regular fa-heart"></i>
              </button>
            </div>
          </div>

          <!-- Content -->
          <div class="card-body d-flex flex-column">
            <h5 class="movie-title mb-2"><%=movie.title%></h5>

            <div class="movie-meta small text-dark mb-3">
              <div><i class="fa fa-user text-warning me-1"></i><%=movie.director%></div>
              <div><i class="fa fa-calendar text-warning me-1"></i><%=movie.year%></div>
              <div><i class="fa fa-clock text-warning me-1"></i><%=movie.duration%></div>
              <div><i class="fa fa-film text-warning me-1"></i><%=movie.industry%></div>
              <div><i class="fa fa-globe text-warning me-1"></i><%=movie.language%></div>
            </div>

            <div class="mt-auto d-flex gap-2">
              <a href="/edit-movie/<%=movie.id%>" class="btn btn-outline-warning w-50">Edit</a>
              <a href="/delete-movie/<%=movie.id%>" class="btn btn-outline-danger w-50">Delete</a>
            </div>
          </div>

        </div>
      </div>
      <% }) %>

    </div>

    <!-- Pagination -->
   <!--  <nav class="mt-5 d-flex justify-content-center">
      <ul class="pagination pagination-glass">
        <li class="page-item"><a class="page-link" href="#">«</a></li>
        <li class="page-item active"><a class="page-link" href="#">1</a></li>
        <li class="page-item"><a class="page-link" href="#">2</a></li>
        <li class="page-item"><a class="page-link" href="#">3</a></li>
        <li class="page-item"><a class="page-link" href="#">»</a></li>
      </ul>
    </nav> -->
   <nav class="mt-5">
    <ul class="pagination justify-content-center">

      <li class="page-item <%= currentPage === 1 ? 'disabled' : '' %>">
        <a class="page-link"
           href="?page=<%= currentPage - 1 %>&search=<%= search %>&sorting=<%= sorting %>">
          &laquo;
        </a>
      </li>

      <% for(let i = 1; i <= totalPages; i++) { %>
        <li class="page-item <%= currentPage === i ? 'active' : '' %>">
          <a class="page-link"
             href="?page=<%= i %>&search=<%= search %>&sorting=<%= sorting %>">
            <%= i %>
          </a>
        </li>
      <% } %>

      <li class="page-item <%= currentPage === totalPages ? 'disabled' : '' %>">
        <a class="page-link"
           href="?page=<%= currentPage + 1 %>&search=<%= search %>&sorting=<%= sorting %>">
          &raquo;
        </a>
      </li>

    </ul>
  </nav>
  </div>
</div>

<!-- ================= EXTRA UI CSS ================= -->
<style>
.stylish-select{
  background: rgba(255,255,255,0.08);
  border:1px solid rgba(255,255,255,0.15);
  color:#fff;
  min-width:220px;
}

.movie-poster-container{
  position:relative;
  overflow:hidden;
  border-radius:14px 14px 0 0;
}

.movie-poster{
  width:100%;
  height:260px;
  object-fit:cover;
  transition:0.4s ease;
}

.movie-card:hover .movie-poster{
  transform:scale(1.1);
}

.movie-overlay{
  position:absolute;
  inset:0;
  background:linear-gradient(to top,rgba(0,0,0,0.8),transparent);
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  padding:12px;
}

.favorite-btn{
  background:rgba(0,0,0,0.6);
  border:none;
  color:#fff;
}
/* ================= PAGINATION COLORS ================= */
.pagination .page-link{
  background: rgba(255,255,255,0.06);
  color: #f8fafc;
  border: 1px solid rgba(255,255,255,0.15);
}

.pagination .page-link:hover{
  background: linear-gradient(135deg,#a855f7,#ec4899);
  color: #ffffff;
  border-color: transparent;
}

/* Active page */
.pagination .page-item.active .page-link{
  background: linear-gradient(135deg,#a855f7,#ec4899);
  color: #000;
  border-color: transparent;
  font-weight: 600;
}

/* Disabled */
.pagination .page-item.disabled .page-link{
  background: rgba(255,255,255,0.03);
  color: #9ca3af;
  border-color: rgba(255,255,255,0.08);
}

/* Arrows */
.pagination .page-link:focus{
  box-shadow: 0 0 0 0.2rem rgba(250,204,21,0.35);
}

</style>
`
<%- include('footer')%>``
